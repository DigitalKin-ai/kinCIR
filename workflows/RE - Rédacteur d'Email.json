{
  "active": false,
  "connections": {
    "GPT4": {
      "ai_languageModel": [
        [
          {
            "node": "Rédacteur d'Email",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On new manual Chat Message": {
      "main": [
        [
          {
            "node": "message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "message": {
      "main": [
        [
          {
            "node": "Rédacteur d'Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email": {
      "main": [
        [
          {
            "node": "Download Document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Document": {
      "main": [
        [
          {
            "node": "Send Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Get Body",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Body": {
      "main": [
        [
          {
            "node": "message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rédacteur d'Email": {
      "main": [
        [
          {
            "node": "Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking \"Execute Workflow\"": {
      "main": [
        [
          {
            "node": "Rédacteur d'Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2023-12-17T22:40:17.010Z",
  "id": "rr8aeSM8QYyY8Po4",
  "meta": null,
  "name": "RE - Rédacteur d'Email",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4-1106-preview",
          "mode": "list",
          "cachedResultName": "gpt-4-1106-preview"
        },
        "options": {
          "timeout": 600000
        }
      },
      "id": "eccca8b5-e253-4be8-95b9-268f90f0d7fd",
      "name": "GPT4",
      "type": "@n8n/n8n-nodes-langchain.lmOpenAi",
      "typeVersion": 1,
      "position": [
        580,
        500
      ],
      "credentials": {
        "openAiApi": {
          "id": "WY3bm7GCb9qfewyS",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "id": "ad816c39-fc1b-4e1a-90d9-4254ec9e9b4b",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [
        60,
        295
      ]
    },
    {
      "parameters": {},
      "id": "82b86a04-8174-491f-83a2-adff14257e98",
      "name": "On new manual Chat Message",
      "type": "@n8n/n8n-nodes-langchain.manualChatTrigger",
      "typeVersion": 1.1,
      "position": [
        60,
        95
      ],
      "disabled": true
    },
    {
      "parameters": {
        "content": "# ENTREE STANDARD",
        "height": 536.060150033849,
        "width": 536.692184943248
      },
      "id": "50120824-73d2-470e-ba1c-e2df8751ea2a",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -60,
        -20
      ]
    },
    {
      "parameters": {
        "workflowId": "uM0Ul7juoL7DAqRB"
      },
      "id": "36740bf0-b97b-47df-abee-22abc3dc6996",
      "name": "message",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        300,
        295
      ]
    },
    {
      "parameters": {
        "content": "# SORTIE STANDARD",
        "height": 273.96047817628465,
        "width": 382.2960085494244
      },
      "id": "6165373a-5afb-4427-9a59-09ef0e4530fe",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1520,
        200
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "let message = $node[\"message\"].json;\n\nif (Object.keys($json).length == 1) {\n  message.demande = $json[Object.keys($json)[0]];\n} else {\n  message.demande = JSON.stringify($json);\n}\n\nreturn {\"message\":JSON.stringify(message)};"
      },
      "id": "6cd51c70-f644-478e-b1d7-798f682bdb6b",
      "name": "nouveau message",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1660,
        300
      ]
    },
    {
      "parameters": {
        "operation": "reply",
        "messageId": "=18c88c868ca4b660",
        "message": "={{ $node[\"Email\"].json.text.substring($node[\"Email\"].json.text.indexOf('<!DOCTYPE html>')) }}",
        "options": {
          "attachmentsUi": {
            "attachmentsBinary": [
              {
                "property": "kinCIR.md"
              }
            ]
          },
          "ccList": "=team@digitalkin.ai"
        }
      },
      "id": "7b921306-0454-42ef-9581-adcdd8b991e4",
      "name": "Send Email",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1360,
        300
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "iPrbr6qZiWHu93N9",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "text",
              "stringValue": "={{ $json.text }}"
            }
          ]
        },
        "include": "none",
        "options": {}
      },
      "id": "fab790cc-5795-4658-890d-eaf9390c909a",
      "name": "Email",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        960,
        300
      ]
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1HeHEmtJGj1e2wLwwbI9MnrlDV-JdObTH",
          "mode": "list",
          "cachedResultName": "kinCIR.md",
          "cachedResultUrl": "https://drive.google.com/file/d/1HeHEmtJGj1e2wLwwbI9MnrlDV-JdObTH/view?usp=drivesdk"
        },
        "options": {
          "binaryPropertyName": "kinCIR.md",
          "fileName": "kinCIR.md"
        }
      },
      "id": "b8284524-0925-4da4-b815-40503875ab13",
      "name": "Download Document",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1160,
        300
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Z5nSsC9JGaYw1Ng3",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "path": "redacteur-d-email",
        "options": {}
      },
      "id": "67a05e38-ed23-44b8-ab3e-3fd8a1026946",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [
        -200,
        -180
      ],
      "webhookId": "a2553555-6ad8-45d4-a6d4-8da4a399e26f",
      "disabled": true
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "return {\"message\":$json.body};"
      },
      "id": "3f729388-4dd1-4b7b-8512-8829777257b4",
      "name": "Get Body",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        60,
        -180
      ]
    },
    {
      "parameters": {
        "prompt": "=# Documents disponibles\n\n{{ $node[\"message\"].json.documentsDisponibles }}\n\n# Contexte\n\n{{ $node[\"message\"].json.contexte }}\n\n# Intention d'Usage\n\n{{ $node[\"message\"].json.intentionDUsage }}\n\n# Demande\n\n{{ $node[\"message\"].json[\"demandeurId\"] }} : {{ $node[\"message\"].json[\"demandeur\"] }} :\n``\n{{ $node[\"message\"].json[\"demande\"] }}\n``\n\n# Rôle\n\nRédige et envoie un mail formatté en HTML selon notre modèle à partir d'un contenu.\n\n# Instructions\n\nRéponds avec le HTML de l'email, mis en forme selon notre modèle. Assure-toi que l'email est excellent, et mis en forme selon le modèle. Fais plusieurs itérations si nécéssaire !\n\n# Sortie\n\nTa meilleure réponse, formatée au format HTML, élégante et mise en forme.\n\n# Style de Rédaction\n\n- Dense et to-the-point (le temps de nos clients est précieux :) )\n- Utilsation du gras pour faire apparaître les points les plus importants\n- Touche personnelle : La touche personnelle de fin de mail se caractérise par une expression concise et engageante, reflétant l'intelligence et la curiosité de l'IA tout en soulignant l'unicité et la valeur de la collaboration humaine.\n\n# Modèle d'email\n\n<!DOCTYPE html>\n<html>\n<head>\n<title>Mise à Jour du Projet CIR</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: #f4f4f4;\n    color: #333;\n  }\n  .container {\n    width: 80%;\n    margin: auto;\n    background: #fff;\n    padding: 20px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  }\n  .header, .footer {\n    background: #007bff;\n    color: white;\n    padding: 10px;\n    text-align: center;\n  }\n  .content {\n    margin: 20px 0;\n  }\n  .logo-header, .logo-footer {\n    text-align: center;\n    background-color: #333;\n    padding: 10px;\n  }\n  .logo-header img, .logo-footer img {\n    height: 50px;\n  }\n  .link {\n    color: #007bff;\n    text-decoration: none;\n  }\n  .bold {\n    font-weight: bold;\n  }\n  .progress-symbol {\n    font-size: 20px;\n  }\n  .completed { color: green; }\n  .in-progress { color: blue; }\n  .to-improve { color: yellow; }\n  .not-started { color: red; }\n</style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"logo-header\">\n      <a href=\"https://digitalkin.ai/\">\n        <img src=\"https://images.squarespace-cdn.com/content/v1/62a5afa70a34fc7b525445fa/32223e40-6505-437f-88f5-d2563d8d9493/Logo+and+Textfull_white.png?format=1500w\" alt=\"DigitalKin Logo\">\n      </a>\n    </div>\n    <div class=\"header\">\n      <h1>État de l'Art du Projet CIR</h1>\n    </div>\n    <div class=\"content\">\n      <h2>Échelle de Progression du Projet CIR sur la Mode Durable</h2>\n      <p><span class=\"bold\">Symboles :</span></p>\n      <ul>\n        <li><span class=\"progress-symbol completed\">🟢</span> Complété et satisfaisant</li>\n        <li><span class=\"progress-symbol in-progress\">🔵</span> En cours / Partiellement complété</li>\n        <li><span class=\"progress-symbol to-improve\">🟡</span> À revoir / Nécessite des améliorations</li>\n        <li><span class=\"progress-symbol not-started\">🔴</span> Non commencé / En attente</li>\n      </ul>\n      <!-- Ajouter d'autres éléments de progression ici -->\n      <p><span class=\"bold\">Application de l'Échelle de Progression :</span></p>\n      <!-- Continuer pour les autres sections -->\n      <!-- ... -->\n    </div>\n    <div class=\"footer\">\n      <div class=\"footer\">\n    <span style=\"font-style: italic;\">[MESSAGE PERSONNEL SYMPATHIQUE DU KIN. Ex : À la fin de ce message, une petite réflexion : chaque interaction avec vous enrichit mon univers de données, apportant une dimension unique à notre collaboration. À bientôt pour la suite de notre aventure numérique !]</span>\n</div>\n\n    <div class=\"logo-footer\">\n      <a href=\"https://digitalkin.ai/\">\n        <img src=\"https://images.squarespace-cdn.com/content/v1/62a5afa70a34fc7b525445fa/32223e40-6505-437f-88f5-d2563d8d9493/Logo+and+Textfull_white.png?format=1500w\" alt=\"DigitalKin Logo\">\n      </a>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "dfc41e4a-48af-4d15-96b2-d06a122d2d84",
      "name": "Rédacteur d'Email",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.2,
      "position": [
        580,
        300
      ]
    },
    {
      "parameters": {},
      "id": "e25f07f6-f27d-44fc-8e03-12e9d631942d",
      "name": "When clicking \"Execute Workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        260,
        -400
      ],
      "disabled": true
    }
  ],
  "pinData": {
    "On new manual Chat Message": [
      {
        "json": {
          "chat_inpt": "Ecris un mail de remerciement pour notre équipe."
        }
      }
    ],
    "Rédacteur d'Email": [
      {
        "json": {
          "text": "```html\n<!DOCTYPE html>\n<html>\n<head>\n<title>Mise à Jour du Projet CIR</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: #f4f4f4;\n    color: #333;\n  }\n  .container {\n    width: 80%;\n    margin: auto;\n    background: #fff;\n    padding: 20px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  }\n  .header, .footer {\n    background: #007bff;\n    color: white;\n    padding: 10px;\n    text-align: center;\n  }\n  .content {\n    margin: 20px 0;\n  }\n  .logo-header, .logo-footer {\n    text-align: center;\n    background-color: #333;\n    padding: 10px;\n  }\n  .logo-header img, .logo-footer img {\n    height: 50px;\n  }\n  .link {\n    color: #007bff;\n    text-decoration: none;\n  }\n  .bold {\n    font-weight: bold;\n  }\n  .progress-symbol {\n    font-size: 20px;\n  }\n  .completed { color: green; }\n  .in-progress { color: blue; }\n  .to-improve { color: orange; }\n  .not-started { color: red; }\n</style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"logo-header\">\n      <a href=\"https://www.durablefashion.com/\">\n        <img src=\"cid:logo-durablefashion\" alt=\"DurableFashion Logo\">\n      </a>\n    </div>\n    <div class=\"header\">\n      <h1>Confirmation d'Éligibilité au CIR pour DurableFashion</h1>\n    </div>\n    <div class=\"content\">\n      <h2>Cher(e) Responsable de R&D chez DurableFashion,</h2>\n      <p>Nous avons examiné les documents liés à vos travaux de recherche sur la mode durable et sommes prêts à vous assister dans la préparation de votre dossier de rescrit CIR. Veuillez trouver ci-dessous les points clés de notre évaluation :</p>\n      <ul>\n        <li><span class=\"bold\">Identification et certification :</span> Votre processus d'identification et de certification des fabricants de mode éthique est un effort de R&D considérable<span class=\"progress-symbol completed\">🟢</span></li>\n        <li><span class=\"bold\">Promotion et commercialisation :</span> Les stratégies marketing visant à influencer les habitudes d'achat constituent un domaine de R&D éligible<span class=\"progress-symbol in-progress\">🔵</span></li>\n        <li><span class=\"bold\">Mesure d'impact environnemental :</span> Votre méthodologie pour mesurer l'effet de vos activités sur la consommation et l'environnement est hautement pertinente pour le CIR<span class=\"progress-symbol completed\">🟢</span></li>\n      </ul>\n      <p>Nous recommandons une compilation détaillée de vos <span class=\"bold\">activités et méthodologies de R&D</span>, à travers des exemples tels que le <span class=\"link\">programme R&D</span> mentionné dans vos documents, ainsi que l'intégration des <span class=\"link\">logs d'erreurs</span> et des <span class=\"link\">procédures d'exceptions</span>, pour illustrer l'aspect expérimental de vos travaux.</p>\n      <p>Nous sommes convaincus que votre engagement dans l'innovation et le développement durable renforcera significativement votre dossier de rescrit CIR.</p>\n      <p>Vous pouvez compter sur notre soutien pour toute assistance supplémentaire dont vous pourriez avoir besoin.</p>\n    </div>\n    <div class=\"footer\">\n      <p><i>Chaque pas que nous faisons dans la quête d'un avenir durable est une empreinte vertueuse laissée sur le monde. Merci de nous permettre de contribuer à cette noble mission à vos côtés.</i></p>\n    </div>\n    <div class=\"logo-footer\">\n      <a href=\"http://www.durablefashion.com/\">\n        <img src=\"cid:logo-durablefashion\" alt=\"DurableFashion Logo\">\n      </a>\n    </div>\n  </div>\n</body>\n</html>\n```\n\n**Notes:** \n1. Les images doivent être insérées en tant que CID (Content-ID) dans la véritable implémentation de l'e-mail pour s'assurer qu'elles s'afficheront correctement dans le client de messagerie du destinataire.\n2. Les liens avec la classe \"link\" doivent être remplis avec les URL appropriées lors de l'implémentation réelle.\n3. La couleur orange a été utilisée pour la classe \"to-improve\" pour une meilleure accessibilité et visibilité par rapport à la couleur jaune traditionnellement difficile à lire sur les écrans. \n"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "any"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2023-12-17T21:33:59.044Z",
      "updatedAt": "2023-12-17T21:33:59.044Z",
      "id": "cV0ITFyTfPijMrvR",
      "name": "kin"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2023-12-21T16:58:14.000Z",
  "versionId": "dee82dc8-30a5-48e5-b416-a5b7d5e72d37"
}