{
  "active": false,
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "entree",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking \"Execute Workflow\"": {
      "main": [
        [
          {
            "node": "entree",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GitHub": {
      "main": [
        [
          {
            "node": "Synchroniser GitHub -> Pinecone1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "entree": {
      "main": [
        [
          {
            "node": "Synchroniser GitHub -> Pinecone",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Synchroniser GitHub -> Pinecone1": {
      "main": [
        [
          {
            "node": "Reponse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Document": {
      "main": [
        [
          {
            "node": "Convert to/from binary data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to/from binary data": {
      "main": [
        [
          {
            "node": "Améliorateur de Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT4": {
      "ai_languageModel": [
        [
          {
            "node": "Améliorateur de Prompt",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Améliorateur de Prompt": {
      "main": [
        [
          {
            "node": "GitHub",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Assisstant": {
      "main": [
        [
          {
            "node": "Get Document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Synchroniser GitHub -> Pinecone": {
      "main": [
        [
          {
            "node": "Get Assisstant",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2023-12-18T04:23:18.784Z",
  "id": "1fR6eCwgdVcJ6SG5",
  "meta": null,
  "name": "AP Amélioreur de Prompt",
  "nodes": [
    {
      "parameters": {},
      "id": "04c9cbe1-a36c-481b-bc40-cbad7b5242c9",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [
        -100,
        300
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "return {\"json\":{\"response\":$node[\"Améliorateur de Prompt\"].json.response.text}};"
      },
      "id": "ef8b5ff7-f62f-4967-b20a-cc56d086ae5f",
      "name": "Reponse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2160,
        300
      ]
    },
    {
      "parameters": {},
      "id": "0bd64694-c506-4c4d-819c-fe9f277cfc5c",
      "name": "When clicking \"Execute Workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -100,
        520
      ]
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "entree",
              "stringValue": "={{ $json.entree }}{{ $json.query }}"
            },
            {
              "name": "kinName",
              "stringValue": "={{ $json.kinName }}"
            },
            {
              "name": "assisstantId",
              "stringValue": "={{ $json.assisstantId }}"
            }
          ]
        },
        "options": {}
      },
      "id": "753e5ae6-3b47-4f32-836a-d719c9205971",
      "name": "entree",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        140,
        300
      ]
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": {
          "__rl": true,
          "value": "DigitalKin-ai",
          "mode": "list",
          "cachedResultName": "DigitalKin-ai",
          "cachedResultUrl": "https://github.com/DigitalKin-ai"
        },
        "repository": {
          "__rl": true,
          "value": "kinCIR",
          "mode": "list",
          "cachedResultName": "kinCIR",
          "cachedResultUrl": "https://github.com/DigitalKin-ai/kinCIR"
        },
        "filePath": "=prompts/{{ $node[\"Get Assisstant\"].json[\"name\"].replace(/([a-z])([A-Z])/g, '$1-$2').replace(/\\s+/g, '-').toLowerCase() }}.md",
        "fileContent": "={{ $json.text }}",
        "commitMessage": "=n8n : {{ $('entree').item.json[\"entree\"] }}"
      },
      "id": "06cc5f65-bb9d-4adb-8ef7-78ee10efb645",
      "name": "GitHub",
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [
        1720,
        300
      ],
      "credentials": {
        "githubApi": {
          "id": "Q3KiSughyw3eRp87",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": "d6khXiG3YxUunViW"
      },
      "id": "be441534-8903-4959-a0d0-925a73eff24f",
      "name": "Synchroniser GitHub -> Pinecone1",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        1960,
        300
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4-1106-preview",
          "mode": "list",
          "cachedResultName": "gpt-4-1106-preview"
        },
        "options": {
          "timeout": 600000
        }
      },
      "id": "b31dfad4-7dc0-4978-9248-5658b98d1aac",
      "name": "GPT4",
      "type": "@n8n/n8n-nodes-langchain.lmOpenAi",
      "typeVersion": 1,
      "position": [
        1260,
        500
      ],
      "credentials": {
        "openAiApi": {
          "id": "WY3bm7GCb9qfewyS",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "setAllData": false,
        "destinationKey": "documentContent",
        "options": {}
      },
      "id": "906c3b24-b584-4378-b6a5-c83c5ca94e50",
      "name": "Convert to/from binary data",
      "type": "n8n-nodes-base.moveBinaryData",
      "typeVersion": 1.1,
      "position": [
        1020,
        300
      ]
    },
    {
      "parameters": {
        "content": "## RS - Rédacteur de Document de Sortie : Rédige une version améliorée du Plan de Document de Sortie à partir d'une instruction ou d'une proposition de Plan",
        "height": 429.80439085591235,
        "width": 548.1198073088228
      },
      "id": "156b131a-5f60-4d6d-976f-64690462612e",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        120,
        -160
      ]
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "DigitalKin-ai",
          "mode": "list",
          "cachedResultName": "DigitalKin-ai",
          "cachedResultUrl": "https://github.com/DigitalKin-ai"
        },
        "repository": {
          "__rl": true,
          "value": "kinCIR",
          "mode": "list",
          "cachedResultName": "kinCIR",
          "cachedResultUrl": "https://github.com/DigitalKin-ai/kinCIR"
        },
        "filePath": "=prompts/{{ $node[\"Get Assisstant\"].json[\"name\"].replace(/[\\s\\W]+/g, '_').toLowerCase() }}.md",
        "additionalParameters": {}
      },
      "id": "459f2100-c519-40dd-a812-9065ce3797df",
      "name": "Get Document",
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [
        800,
        300
      ],
      "credentials": {
        "githubApi": {
          "id": "Q3KiSughyw3eRp87",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "prompt": "=# Rôle\n\nAméliorateur de prompt: Utilise tes compétences analytiques et créatives pour améliorer les prompts des assistants GPTs, en te concentrant sur la précision, la clarté et la pertinence. Fais preuve d'un regard critique pour évaluer chaque prompt, tout en respectant le périmètre fonctionnel de l'assistant.\n\n# Instructions\n\n1) **Compréhension et Planification** :\n   - Lorsque tu reçois une demande, commence par analysr ce prompt pour comprendre son objectif, en identifiant ses points forts et ses faiblesses, ainsi que les opportunités d'amélioration.\n\n2) **Amélioration Critique du Prompt** :\n   - En tenant compte de ton analyse, révise le prompt pour maximiser sa clarté, précision et pertinence. Applique un regard critique lors de la reformulation pour respecter les capacités et les limites de l'assistant GPT.\n\n# Fonctions Accessibles\n\n- **ARCHITECTE (Communication & Workflow Optimization)** : Optimise la communication et l'organisation entre les différents assistants GPT dans un réseau pour une meilleure intégration et un flux de travail efficace.\n\n- **ScratchPad (Brouillon & Itération Textuelle)** : Utilise cette fonction pour des sessions de travail approfondies sur la génération de texte, telles que l'écriture, l'édition ou l'amélioration de concepts, en suivant des instructions détaillées.\n\n# Structure typique d'un Prompt Système d'Assistant\n``\n# Rôle\nObjectif: Définir clairement la fonction que l'assistant GPT est censé jouer dans ce prompt, ce qui oriente les attentes concernant sa performance.\nContenu: La description du rôle doit se limiter à une ou deux phrases précises qui résument la contribution attendue de l'assistant.\n\n# Contexte\nObjectif: Fournir une compréhension de la situation ou du scénario dans lequel le prompt est émis, ce qui permet à l'assistant d'adapter sa réponse à la situation.\nContenu: Des informations pertinentes et précises qui donnent un cadre au prompt, permettant à l'assistant de contextualiser sa réponse.\n\n# Entrée\n## Modèle d'Entrée\nObjectif: Spécifier la forme et la nature des informations que l'utilisateur fournira et comment l'assistant doit les interpréter ou les traiter.\nContenu: Des directives claires sur le format des données d'entrée, éventuellement illustrées par un exemple pour assurer une application correcte.\n\n# Instructions\nObjectif: Diriger l'assistant sur la manière dont il doit gérer le prompt, quelle méthodologie appliquer, et les étapes à suivre pour aboutir à la réponse attendue.\nContenu: Des étapes actionnables et une explication de chaque action attendue, possiblement accompagnée d'exemples pour clarifier la demande.\n\n## Exemple de Processus\nObjectif: Fournir une illustration concrète de la manière dont les instructions peuvent être mises en œuvre, servant de guide pour l'assistant.\nContenu: Un scénario hypothétique ou un cas pratique qui simule le déroulement des instructions précédentes, invitant l'assistant à suivre une démarche similaire.\n\n# Sortie\nObjectif: Établir les attentes concernant le résultat final de l'assistant GPT, que ce soit en termes de format, de détails ou de structure de la réponse.\nContenu: Des critères précis qui définissent ce que doit contenir la réponse en termes d'informations et de présentation, assurant ainsi que la réponse finie est utilisable et conforme aux exigences.\n\n``\n\n"
      },
      "id": "c50c09c3-3cff-4c8a-a5c1-e905f01d7bd5",
      "name": "Améliorateur de Prompt",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.2,
      "position": [
        1240,
        300
      ]
    },
    {
      "parameters": {
        "url": "=https://api.openai.com/v1/assistants/{{ $('entree').item.json[\"assistantId\"] }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "OpenAI-Beta",
              "value": "assistants=v1"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Bearer",
              "value": "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"
            }
          ]
        },
        "options": {}
      },
      "id": "1a4fa9cf-c16d-41ef-8406-c5d170e0f034",
      "name": "Get Assisstant",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        580,
        300
      ],
      "credentials": {
        "openAiApi": {
          "id": "WY3bm7GCb9qfewyS",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": "d6khXiG3YxUunViW"
      },
      "id": "745b4649-fa14-414e-ad21-d8408daec274",
      "name": "Synchroniser GitHub -> Pinecone",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        360,
        300
      ]
    }
  ],
  "pinData": {
    "When clicking \"Execute Workflow\"": [
      {
        "json": {
          "query": "# Fonctions Accessibles Principales : - **ScratchPad (Brouillon & Itération Textuelle)** : Utilise cette fonction pour des sessions de travail approfondies sur la génération de texte, telles que l'écriture, l'édition ou l'amélioration de concepts, en suivant des instructions détaillées. -Améliorateur de Prompt : Améliore le prompt de l'assistant qui le demande sans changer son périmètre fonctionnel, en partant d'un problème à résoudre ou d'une demande d'amélioration Autres Fonctions : - **ARCHITECTE (Communication & Workflow Optimization)** : Optimise la communication et l'organisation entre les différents assistants GPT dans un réseau pour une meilleure intégration et un flux de travail efficace.",
          "kinName": "kincir_dynergie",
          "intentionDUsage": "Ces éléments seront utilisés pour démontrer l'éligibilité au dispositif CRÉDIT IMPÔT RECHERCHE (CIR) de travaux de recherche sur le thème de la mode durable, dans le cadre d'un rescrit CIR.",
          "assistantId": "asst_L05RD7upJZbxUfZ06MPISYv5"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "any"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2023-12-17T10:07:55.424Z",
      "updatedAt": "2023-12-17T10:07:55.424Z",
      "id": "DzuSxffpFOEBRhld",
      "name": "fonction"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2023-12-18T08:39:31.000Z",
  "versionId": "5219c0a0-19fc-4f9c-bfa7-ab75712738c8"
}