{
  "active": false,
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "mission",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking \"Execute Workflow\"": {
      "main": [
        [
          {
            "node": "mission",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On new manual Chat Message": {
      "main": [
        [
          {
            "node": "mission",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RESSOURCES IA": {
      "ai_tool": [
        [
          {
            "node": "Chercheur Scientifique",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Chercheur Scientifique": {
      "main": [
        [
          {
            "node": "Reponse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "message": {
      "main": [
        [
          {
            "node": "Get Assistant",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Assistant": {
      "main": [
        [
          {
            "node": "Chercheur Scientifique",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Questionneur d'Etudes": {
      "ai_tool": [
        [
          {
            "node": "Chercheur Scientifique",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Acquéreur de Citations": {
      "ai_tool": [
        [
          {
            "node": "Chercheur Scientifique",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "mission": {
      "main": [
        [
          {
            "node": "message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2023-12-16T10:56:15.284Z",
  "id": "f4z3JUKhsFgmKRgZ",
  "meta": null,
  "name": "CHERCHEUR SCIENTIFIQUE -  Récupérateur d'études et extracteur d'informations",
  "nodes": [
    {
      "parameters": {},
      "id": "cb4a8070-4773-4355-a116-c9954f8cd12c",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [
        1440,
        240
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "return {\"json\":{\"response\": $node[\"Chercheur Scientifique\"].json.output}};"
      },
      "id": "850d8625-af1c-4dd8-a8fa-600014b4caeb",
      "name": "Reponse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2860,
        260
      ]
    },
    {
      "parameters": {},
      "id": "3b7793c9-18e0-49f9-a0d5-9b33c63340fb",
      "name": "When clicking \"Execute Workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1440,
        460
      ]
    },
    {
      "parameters": {},
      "id": "2fbfb86f-996f-412c-beb1-46f565a433df",
      "name": "On new manual Chat Message",
      "type": "@n8n/n8n-nodes-langchain.manualChatTrigger",
      "typeVersion": 1.1,
      "position": [
        1440,
        40
      ]
    },
    {
      "parameters": {
        "content": "## CHERCHEUR SCIENTIFIQUE: En tant qu'assistant GPT avec accès à une large base de données, mon objectif est de fournir des réponses sourcées et détaillées aux demandes d'information des utilisateurs.",
        "height": 443.0545261129006,
        "width": 548.1198073088228
      },
      "id": "eba90136-3881-4fb9-8cf2-fb15bc01d9c6",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1760,
        -220
      ]
    },
    {
      "parameters": {
        "assistantId": "asst_hNyr1QuF0nptyuRJJAiOa1gV",
        "text": "={{ $node[\"message\"].json.message }}",
        "nativeTools": [
          "code_interpreter",
          "retrieval"
        ],
        "options": {}
      },
      "id": "7ef91002-99e3-47e2-b34b-06c01558dffd",
      "name": "Chercheur Scientifique",
      "type": "@n8n/n8n-nodes-langchain.openAiAssistant",
      "typeVersion": 1,
      "position": [
        2480,
        260
      ],
      "credentials": {
        "openAiApi": {
          "id": "WY3bm7GCb9qfewyS",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "name": "ressources_ia",
        "description": "=Améliore ton prompt (Assistant) à partir d'un problème à résoudre ou demande d'amélioration. Gère les problèmes de performance personnels des Assistants.",
        "workflowId": "imN4HxXd5zhpJoyV",
        "fields": {
          "values": [
            {
              "name": "kinName",
              "stringValue": "={{ $('entree').item.json[\"kinName\"] }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $('entree').item.json[\"intentionDUsage\"] }}"
            },
            {
              "name": "assistantId",
              "stringValue": "asst_L05RD7upJZbxUfZ06MPISYv5"
            }
          ]
        }
      },
      "id": "66af0df8-3be3-4053-bec2-7d07f3f2a65b",
      "name": "RESSOURCES IA",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1,
      "position": [
        2040,
        720
      ],
      "disabled": true
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "kin",
              "stringValue": "={{ $json.kin }}"
            },
            {
              "name": "=demandeur",
              "stringValue": "={{ $json.demandeur }}"
            },
            {
              "name": "demandeurId",
              "stringValue": "={{ $json.demandeurId }}"
            },
            {
              "name": "producteurId",
              "stringValue": "={{ $json.producteurId }}"
            },
            {
              "name": "contexte",
              "stringValue": "={{ $json.contexte }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $json.intentionDUsage }}"
            },
            {
              "name": "demande",
              "stringValue": "={{ $json.demande }}"
            },
            {
              "name": "message",
              "stringValue": "=# Contexte\n\n{{ $json.contexte }}\n\n# Intention d'Usage\n\n{{ $json.intentionDUsage }}\n\n# Demande de {{ $json.demandeur }}\n\n{{ $json.demande }}"
            }
          ]
        },
        "options": {}
      },
      "id": "bbbf5323-73c3-4b8b-b76c-52ae6c9ef11b",
      "name": "message",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        2020,
        260
      ]
    },
    {
      "parameters": {
        "url": "=https://api.openai.com/v1/assistants/{{ $('mission').item.json[\"producteurId\"] }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "OpenAI-Beta",
              "value": "assistants=v1"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "options": {}
      },
      "id": "63a5e0fa-c739-4316-8b71-3e5e1753f050",
      "name": "Get Assistant",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        2240,
        260
      ],
      "credentials": {
        "openAiApi": {
          "id": "WY3bm7GCb9qfewyS",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "name": "questionneur_d_etudes",
        "description": "Retourne des citations précises issues d'études pertinentes à partir d'un objectif à démontrer ou une demande informationnelle.",
        "workflowId": "yQ79P9nuVKhkwZpD",
        "fields": {
          "values": [
            {
              "name": "kin",
              "stringValue": "={{ $node[\"mission\"].json[\"kin\"] }}"
            },
            {
              "name": "demandeur",
              "stringValue": "={{ $node[\"Get Assistant\"].json.name }}"
            },
            {
              "name": "demandeurId",
              "stringValue": "={{ $node[\"Get Assistant\"].json.id }}"
            },
            {
              "name": "producteurId",
              "stringValue": "=asst_RMuliVrHho2VxBhfZBG1cnTN"
            },
            {
              "name": "contexte",
              "stringValue": "={{ $node[\"message\"].json.contexte }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $node[\"message\"].json.intentionDUsage }}"
            }
          ]
        }
      },
      "id": "992a0d02-43fd-4cb2-8717-0b7244583cb2",
      "name": "Questionneur d'Etudes",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1,
      "position": [
        2740,
        580
      ]
    },
    {
      "parameters": {
        "name": "acquereur_de_citations",
        "description": "Retourne des citations précises issues d'études pertinentes à partir d'un objectif à démontrer ou une demande informationnelle.",
        "workflowId": "It2FPpnGNxaxojxY",
        "fields": {
          "values": [
            {
              "name": "kin",
              "stringValue": "={{ $node[\"mission\"].json[\"kin\"] }}"
            },
            {
              "name": "demandeur",
              "stringValue": "={{ $node[\"Get Assistant\"].json.name }}"
            },
            {
              "name": "demandeurId",
              "stringValue": "={{ $node[\"Get Assistant\"].json.id }}"
            },
            {
              "name": "producteurId",
              "stringValue": "=asst_RMuliVrHho2VxBhfZBG1cnTN"
            },
            {
              "name": "contexte",
              "stringValue": "={{ $node[\"message\"].json.contexte }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $node[\"message\"].json.intentionDUsage }}"
            }
          ]
        }
      },
      "id": "f439d5e2-a855-4c18-980f-143941cbfaa6",
      "name": "Acquéreur de Citations",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1,
      "position": [
        2600,
        580
      ]
    },
    {
      "parameters": {
        "name": "scratchpad",
        "description": "Crée une copie de toi même, sans les accès aux fonctions, afin de pouvoir répondre aux demandes de génération textuelles et de reflexion (exemples : prendre le temps de rédiger, faire plusieurs itérations pour améliorer un texte, etc.), à partir d'une demande précise donnée en entrée.",
        "workflowId": "wTbd0CgnGrumh0qf",
        "fields": {
          "values": [
            {
              "name": "kin",
              "stringValue": "={{ $node[\"mission\"].json[\"kin\"] }}"
            },
            {
              "name": "demandeur",
              "stringValue": "={{ $node[\"Get Assistant\"].json.name }}"
            },
            {
              "name": "demandeurId",
              "stringValue": "={{ $node[\"Get Assistant\"].json.id }}"
            },
            {
              "name": "producteurId",
              "stringValue": "=asst_RMuliVrHho2VxBhfZBG1cnTN"
            },
            {
              "name": "contexte",
              "stringValue": "={{ $node[\"message\"].json.contexte }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $node[\"message\"].json.intentionDUsage }}"
            }
          ]
        }
      },
      "id": "99b8d5b1-5a98-4677-9869-70b6f157557b",
      "name": "ScratchPad",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1,
      "position": [
        2440,
        700
      ]
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "kin",
              "stringValue": "=kincir_dynergie"
            },
            {
              "name": "demandeur",
              "stringValue": "Sébastien"
            },
            {
              "name": "demandeurId",
              "stringValue": "={{ $json.demandeurId }}"
            },
            {
              "name": "producteurId",
              "stringValue": "={{ $json.producteurId }}"
            },
            {
              "name": "contexte",
              "stringValue": "={{ $json.contexte }}"
            },
            {
              "name": "intentionDUsage",
              "stringValue": "={{ $json.intentionDUsage }}"
            },
            {
              "name": "demande",
              "stringValue": "={{ $json.chat_input }}"
            }
          ]
        },
        "options": {}
      },
      "id": "902d71a3-48cb-439b-8f90-f3d0105ccf7b",
      "name": "mission",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1780,
        260
      ]
    }
  ],
  "pinData": {
    "mission": [
      {
        "json": {
          "kin": "kincir_dynergie",
          "demandeur": "Sébastien Deschaux",
          "demandeurId": "asst_PtFkjK3WpkPD5u6ZLc6toZ0q",
          "producteurId": "asst_PtFkjK3WpkPD5u6ZLc6toZ0q",
          "contexte": "L’entreprise WeDressFair est spécialisée dans la mode durable et éthique. \nActivité : Elle identifie et certifie des fabricants d’articles de mode durable et éthique, fait la promotion de leurs articles soulignant l’aspect durable et éthique, et commercialise leurs articles via internet et ses boutiques.\n\nLe but de l’entreprise est d’augmenter la part de mode durable et éthique dans la mode.\nLe principal objectif de recherche est de parvenir à influencer la consommation, et la production, d’articles de mode responsable et éthique.\nLes thématiques de recherche sont :  \nParvenir à influencer les consommateurs à réaliser des achats de vêtements provenant de marques responsables et éthiques.  \nParvenir à influencer les marques à produire des vêtements responsables et éthiques.\nParvenir à montrer l’impact de nos activités sur la consommation de biens de mode et mesurer cet impact sur l’environnement.",
          "intentionDUsage": "Ces éléments seront utilisés pour démontrer l'éligibilité au dispositif CRÉDIT IMPÔT RECHERCHE (CIR) de travaux de recherche sur le thème de la mode durable, dans le cadre d'un rescrit CIR.",
          "demande": "Donne moi des infos sur la mode durable"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "any"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2023-12-17T10:07:55.424Z",
      "updatedAt": "2023-12-17T10:07:55.424Z",
      "id": "DzuSxffpFOEBRhld",
      "name": "fonction"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2023-12-19T21:51:34.000Z",
  "versionId": "e9a9edf6-20be-42fa-ab08-e5d9f783c8c6"
}